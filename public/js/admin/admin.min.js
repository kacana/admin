/*! Kacana 10-10-2015 */
var Kacana={},datatablePackage={datatable:{init:function(a,b,c){column_arr=[];for(var d=0;d<b.length;d++)column_arr.push({data:b[d],name:b[d]});$("#"+a).DataTable({bLengthChange:!1,aTargets:["nosort"],processing:!0,serverSide:!0,ajax:c,columns:column_arr})}}};$.extend(!0,Kacana,datatablePackage);var productPackage={product:{init:function(){Kacana.product.listProducts(),Kacana.product.removeProduct()},listProducts:function(){var a=["id","name","image","price","sell_price","status","created","updated","action"],b=Kacana.datatable.init("table",a,"/product/getProduct");$("#search-form").on("submit",function(a){b.search($("#search-name").val()).draw(),a.preventDefault()})},removeProduct:function(a){$("#confirm").modal("show"),$("#delete").click(function(b){return $.ajax({type:"get",url:"/product/removeProduct/"+a,success:function(){window.location.reload()}}),!1})},setStatus:function(a,b){$.ajax({type:"get",url:"/product/setStatus/"+a+"/"+b,success:function(a){window.location.reload()}})},branch:{init:function(){Kacana.product.branch.listBranch(),Kacana.product.branch.showEditBranchForm(),Kacana.product.branch.editBranch(),Kacana.product.branch.showEditBranchForm(),Kacana.product.branch.setStatusBranch()},listBranch:function(){var a=["id","name","image","status","created","updated","action"],b=Kacana.datatable.init("table",a,"/branch/getBranch");$("#search-form").on("submit",function(a){b.search($("#search-name").val()).draw(),a.preventDefault()})},createBranch:function(){$("#btn-create").attr("disabled",!0);var a=new FormData,b=$("#image").prop("files")[0],c=$("#form-create-branch").serialize();a.append("image",b);var d=$.ajax({type:"post",url:"/branch/createBranch?"+c,data:a,contentType:!1,processData:!1});d.done(function(a,b,c){window.location.reload()}),d.fail(function(a,b,c){json_result=JSON.parse(a.responseText),""!=typeof json_result.image&&$("#error-image").html(json_result.image),""!=typeof json_result.name&&$("#error-name").html(json_result.name)})},showEditBranchForm:function(a){$.ajax({type:"get",url:"/branch/showEditFormBranch/"+a,success:function(a){$("#editModal").html(a),$("#editModal").modal("show")}})},editBranch:function(){var a=new FormData,b=$("#image").prop("files")[0],c=$("#form-create-branch").serialize();a.append("image",b);var d=$.ajax({type:"post",url:"/branch/editBranch?"+c,data:a,contentType:!1,processData:!1});d.done(function(a,b,c){window.location.reload()}),d.fail(function(a,b,c){json_result=JSON.parse(a.responseText),""!=typeof json_result.image&&$("#error-image").html(json_result.image),""!=typeof json_result.name&&$("#error-name").html(json_result.name)})},setStatusBranch:function(a,b){$.ajax({type:"get",url:"/branch/setStatusBranch/"+a+"/"+b,success:function(a){window.location.reload()}})},removeBranch:function(a){$("#confirm").modal("show"),$("#delete").click(function(b){return $.ajax({type:"get",url:"/branch/removeBranch/"+a,success:function(){window.location.reload()}}),!1})}},tag:{init:function(){},showCreateForm:function(a){$.ajax({type:"get",url:"/tag/showFormCreate/"+a,success:function(a){$("#myModal").html(a),$("#myModal").modal("show")}})},createTag:function(){$("#btn-create").attr("disabled",!0);var a=$("#form-create-tag").serialize(),b=$.ajax({type:"post",url:"/tag/createTag?"+a,contentType:!1,processData:!1});b.done(function(a,b,c){window.location.reload()}),b.fail(function(a,b,c){json_result=JSON.parse(a.responseText),""!=typeof json_result.name&&$("#error-name").html(json_result.name)})},showEditForm:function(a){$.ajax({type:"get",url:"/tag/showEditFormTag/"+a,success:function(a){$("#myModal").html(a),$("#myModal").modal("show")}})},editTag:function(){var a=$("#form-edit-tag").serialize(),b=$.ajax({type:"post",url:"/tag/editTag?"+a,contentType:!1,processData:!1});b.done(function(a,b,c){window.location.reload()}),b.fail(function(a,b,c){json_result=JSON.parse(a.responseText),""!=typeof json_result.name&&$("#error-name").html(json_result.name)})},setStatusTag:function(a,b){$.ajax({type:"get",url:"/tag/setStatusTag/"+a+"/"+b,success:function(a){window.location.reload()}})},removeTag:function(a){$("#confirm").modal("show"),$("#delete").click(function(b){return $.ajax({type:"get",url:"/tag/removeTag/"+a,success:function(){window.location.reload()}}),!1})},setType:function(a,b){$.ajax({type:"get",url:"/tag/setType/"+a+"/"+b,success:function(){window.location.reload()}})}}}};$.extend(!0,Kacana,productPackage);var userPackage={user:{init:function(){Kacana.user.listUsers(),Kacana.user.createUser(),Kacana.user.setStatus()},listUsers:function(){var a=["id","name","email","image","role","user_type","status","created","updated","action"],b=Kacana.datatable.init("table",a,"/user/getUser");$("#search-form").on("submit",function(a){b.search($("#search-name").val()).draw(),a.preventDefault()})},showFormCreateUser:function(){$.ajax({type:"get",url:"/user/showCreateForm",success:function(a){$("#createModal").html(a),$("#createModal").modal("show")}})},createUser:function(){$("#btn-create").attr("disabled",!0);var a=new FormData,b=$("#image").prop("files")[0],c=$("#form-create-user").serialize();a.append("image",b);var d=$.ajax({type:"post",url:"/user/create?"+c,data:a,contentType:!1,processData:!1});d.done(function(a,b,c){window.location.reload()}),d.fail(function(a,b,c){json_result=JSON.parse(a.responseText),""!=typeof json_result.email&&$("#error-email").html(json_result.email),""!=typeof json_result.name&&$("#error-name").html(json_result.name),""!=typeof json_result.password&&$("#error-password").html(json_result.password),$("#btn-create").attr("disabled",!1)})},removeUser:function(a){$("#confirm").modal("show"),$("#delete").click(function(b){return $.ajax({type:"get",url:"/user/remove/"+a,success:function(){window.location.reload()}}),!1})},setStatus:function(a,b){$.ajax({type:"get",url:"/user/setStatus/"+a+"/"+b,success:function(a){window.location.reload()}})}}};$.extend(!0,Kacana,userPackage);