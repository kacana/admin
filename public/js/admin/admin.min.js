/*! Kacana 16-10-2015 */
var ajaxPackage={ajax:{init:function(a,b,c,d,e,f,g){var h=!0;g.cache&&(h=!1);var i=!0;g.async&&(i=!1),$.ajax({url:a,dataType:b,type:c,cache:h,async:i,data:d}).done(function(a){e(a)}).error(function(){f()})},initFileUpload:function(a,b,c,d,e){$.ajax({url:a,type:b,data:c,processData:!1,contentType:!1}).done(function(a){d(a)}).fail(function(a,b,c){e(a)})},checkStatus:function(a,b){$.ajax(a,{type:"HEAD"}).done(function(a,c,d){b(d.status)})},user:{showFormCreateUser:function(a,b){Kacana.ajax.init("/user/showCreateForm","","get","",a,b,[])},createUser:function(a,b,c,d){Kacana.ajax.initFileUpload("/user/create?"+a,"post",b,c,d)},removeUser:function(a,b,c){Kacana.ajax.init("/user/remove/"+a,"","get","",b,c,[])},setStatus:function(a,b,c,d){Kacana.ajax.init("/user/setStatus/"+a+"/"+b,"","get","",c,d,[])}},branch:{createBranch:function(a,b,c,d){Kacana.ajax.initFileUpload("/branch/createBranch?"+a,"post",b,c,d)},showEditBranchForm:function(a,b,c){Kacana.ajax.init("/branch/showEditFormBranch/"+a,"","get","",b,c,[])},editBranch:function(a,b,c,d){Kacana.ajax.initFileUpload("/branch/editBranch?"+a,"post",b,c,d)},setStatusBranch:function(a,b,c,d){Kacana.ajax.init("/branch/setStatusBranch/"+a+"/"+b,"","get","",c,d,[])},removeBranch:function(a,b,c){Kacana.ajax.init("/branch/removeBranch/"+a,"","get","",b,c,[])}},product:{removeProduct:function(a,b,c){Kacana.ajax.init("/product/removeProduct/"+a,"","get","",b,c,[])},setStatus:function(a,b,c,d){Kacana.ajax.init("/product/setStatus/"+a+"/"+b,"","get","",c,d,[])}},tag:{showCreateForm:function(a,b,c){Kacana.ajax.init("/tag/showFormCreate/"+a,"","get","",b,c,[])},createTag:function(a,b,c){Kacana.ajax.initFileUpload("/tag/createTag?"+a,"post","",b,c)},showEditForm:function(a,b,c){Kacana.ajax.init("/tag/showEditFormTag/"+a,"","get","",b,c,[])},editTag:function(a,b,c){Kacana.ajax.initFileUpload("/tag/editTag?"+a,"post","",b,c)},removeTag:function(a,b,c){Kacana.ajax.init("/tag/removeTag/"+a,"","get","",b,c,[])},setType:function(a,b,c,d){Kacana.ajax.init("/tag/setType/"+a+"/"+b,"json","get","",c,d,[])}},userAddress:{showFormEdit:function(a,b,c){Kacana.ajax.init("/user/showFormEditUserAddress/"+a,"","get","",b,c,[])},edit:function(a,b,c){Kacana.ajax.initFileUpload("/user/editUserAddress?"+a,"post","",b,c)}}}};$.extend(!0,Kacana,ajaxPackage);var Kacana={},datatablePackage={datatable:{init:function(a,b,c){column_arr=[];for(var d=0;d<b.length;d++)column_arr.push({data:b[d],name:b[d]});$("#"+a).DataTable({bLengthChange:!1,aTargets:["nosort"],processing:!0,serverSide:!0,ajax:c,columns:column_arr})}}};$.extend(!0,Kacana,datatablePackage);var productPackage={product:{init:function(){Kacana.product.listProducts(),Kacana.product.removeProduct()},listProducts:function(){var a=["id","name","image","price","sell_price","status","created","updated","action"],b=Kacana.datatable.init("table",a,"/product/getProduct");$("#search-form").on("submit",function(a){b.search($("#search-name").val()).draw(),a.preventDefault()})},removeProduct:function(a){$("#confirm").modal("show");var b=function(a){window.location.reload()},c=function(){};$("#delete").click(function(d){Kacana.ajax.product.removeProduct(a,b,c)})},setStatus:function(a,b){var c=function(a){window.location.reload()},d=function(){};Kacana.ajax.product.setStatus(a,b,c,d)},branch:{init:function(){Kacana.product.branch.listBranch(),Kacana.product.branch.showEditBranchForm(),Kacana.product.branch.editBranch(),Kacana.product.branch.showEditBranchForm(),Kacana.product.branch.setStatusBranch()},listBranch:function(){var a=["id","name","image","status","created","updated","action"],b=Kacana.datatable.init("table",a,"/branch/getBranch");$("#search-form").on("submit",function(a){b.search($("#search-name").val()).draw(),a.preventDefault()})},createBranch:function(){$("#btn-create").attr("disabled",!0);var a=new FormData,b=$("#image").prop("files")[0],c=$("#form-create-branch").serialize();a.append("image",b);var d=function(a){window.location.reload()},e=function(a){json_result=JSON.parse(a.responseText),""!=typeof json_result.image&&$("#error-image").html(json_result.image),""!=typeof json_result.name&&$("#error-name").html(json_result.name),$("#btn-create").attr("disabled",!1)};Kacana.ajax.branch.createBranch(c,a,d,e)},showEditBranchForm:function(a){var b=function(a){$("#editModal").html(a),$("#editModal").modal("show")},c=function(){};Kacana.ajax.branch.showEditBranchForm(a,b,c)},editBranch:function(){var a=new FormData,b=$("#image").prop("files")[0],c=$("#form-create-branch").serialize();a.append("image",b);var d=function(a){window.location.reload()},e=function(a){json_result=JSON.parse(a.responseText),""!=typeof json_result.image&&$("#error-image").html(json_result.image),""!=typeof json_result.name&&$("#error-name").html(json_result.name),$("#btn-create").attr("disabled",!1)};Kacana.ajax.branch.editBranch(c,a,d,e)},setStatusBranch:function(a,b){var c=function(a){window.location.reload()},d=function(){};Kacana.ajax.branch.setStatusBranch(a,b,c,d)},removeBranch:function(a){$("#confirm").modal("show");var b=function(a){window.location.reload()},c=function(){};$("#delete").click(function(d){Kacana.ajax.branch.removeBranch(a,b,c)})}},tag:{init:function(){},showCreateForm:function(a){var b=function(a){$("#myModal").html(a),$("#myModal").modal("show")},c=function(){};Kacana.ajax.tag.showCreateForm(a,b,c)},createTag:function(){$("#btn-create").attr("disabled",!0);var a=$("#form-create-tag").serialize(),b=function(a){$("#myModal").modal("hide"),a=JSON.parse(a);var b=$("#tree-tags"),c=b.tree("getNodeById",a.parent_id);c?(b.tree("appendNode",{label:a.name,id:a.id,childs:a.childs},c),b.tree("updateNode",c,{childs:a.childs_of_parent}),b.tree("openNode",c,!0)):b.tree("appendNode",{label:a.name,id:a.id,childs:a.childs})},c=function(a){json_result=JSON.parse(a.responseText),""!=typeof json_result.name&&$("#error-name").html(json_result.name)};Kacana.ajax.tag.createTag(a,b,c)},showEditForm:function(a){var b=function(a){$("#myModal").html(a),$("#myModal").modal("show")},c=function(){};Kacana.ajax.tag.showEditForm(a,b,c)},editTag:function(){var a=$("#form-edit-tag").serialize(),b=function(a){a=JSON.parse(a),$("#myModal").modal("hide");var b=$("#tree-tags"),c=b.tree("getNodeById",a.id);b.tree("updateNode",c,a.name),0!=json_result.parent_id&&b.tree("openNode",b.tree("getNodeById",a.parent_id),!0)},c=function(a){json_result=JSON.parse(a),""!=typeof json_result.name&&$("#error-name").html(json_result.name)};Kacana.ajax.tag.editTag(a,b,c)},removeTag:function(a){$("#confirm").modal("show"),$("#delete").click(function(b){var c=function(b){$("#confirm").modal("hide");var c=$("#tree-tags"),d=c.tree("getNodeById",a);c.tree("removeNode",d)},d=function(){};Kacana.ajax.tag.removeTag(a,c,d)})},setType:function(a,b){$idselected=$("#_tag_"+a);var c=function(a){var b=$("#tree-tags"),c=b.tree("getNodeById",a.id);b.tree("updateNode",c,{label:a.name,type:a.type}),0!=a.parent_id&&b.tree("openNode",b.tree("getNodeById",a.parent_id),!0)},d=function(){};Kacana.ajax.tag.setType(a,b,c,d)}}}};$.extend(!0,Kacana,productPackage);var userPackage={user:{init:function(){Kacana.user.listUsers(),Kacana.user.createUser(),Kacana.user.setStatus()},listUsers:function(){var a=["id","name","email","image","role","user_type","status","created","updated","action"],b=Kacana.datatable.init("table",a,"/user/getUser");$("#search-form").on("submit",function(a){b.search($("#search-name").val()).draw(),a.preventDefault()})},showFormCreateUser:function(){var a=function(a){$("#createModal").html(a),$("#createModal").modal("show")},b=function(){};Kacana.ajax.user.showFormCreateUser(a,b)},createUser:function(){$("#btn-create").attr("disabled",!0);var a=new FormData,b=$("#image").prop("files")[0],c=$("#form-create-user").serialize();a.append("image",b);var d=function(a){window.location.reload()},e=function(a){json_result=JSON.parse(a.responseText),""!=typeof json_result.email&&$("#error-email").html(json_result.email),""!=typeof json_result.name&&$("#error-name").html(json_result.name),""!=typeof json_result.phone&&$("#error-phone").html(json_result.phone),""!=typeof json_result.password&&$("#error-password").html(json_result.password),$("#btn-create").attr("disabled",!1)};Kacana.ajax.user.createUser(c,a,d,e)},removeUser:function(a){$("#confirm").modal("show");var b=function(a){window.location.reload()},c=function(){};$("#delete").click(function(d){Kacana.ajax.user.removeUser(a,b,c)})},setStatus:function(a,b){var c=function(a){window.location.reload()},d=function(){};Kacana.ajax.user.setStatus(a,b,c,d)},userAddress:{listUserAddress:function(a){var b=["id","name","email","phone","street","city","ward","action"];Kacana.datatable.init("table",b,"/user/getUserAddress/"+a)},showFormEdit:function(a){var b=function(a){$("#createModal").html(a),$("#createModal").modal("show")},c=function(){};Kacana.ajax.userAddress.showFormEdit(a,b,c)},edit:function(){var a=$("#form-edit-address").serialize(),b=function(a){window.location.reload()},c=function(a){json_result=JSON.parse(a),""!=typeof json_result.name&&$("#error-name").html(json_result.name),""!=typeof json_result.email&&$("#error-email").html(json_result.email),""!=typeof json_result.phone&&$("#error-phone").html(json_result.phone),""!=typeof json_result.street&&$("#error-street").html(json_result.street)};Kacana.ajax.userAddress.edit(a,b,c)}}}};$.extend(!0,Kacana,userPackage);